# 常见面试题

1. **http2 的特点，与http1有何不同之处？**

   [关于HTTP /1.1 与 /2.0版本的常见差异和特性](https://juejin.im/post/6844903683277193223)

- 二进制传输
- header压缩
- 多路复用
- 服务器端推送

2. **xss、csrf 是什么，如何防范？**

   [前端安全系列（一）：如何防止XSS攻击？](https://juejin.im/post/6844903685122703367)

   [前端安全系列之二：如何防止CSRF攻击？](https://juejin.im/post/6844903689702866952)

   - **xss** : 跨站脚本攻击，攻击者通过在目标网站上注入脚本，使之在用户的浏览器上运行，从而引发潜在风险。

     防范：html转义，注意特殊的 HTML 属性、JavaScript API

   - **Csrf**：跨站请求伪造：攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。

     防范：**阻止不明外域的访问**，包括**同源检测**和Samesite Cookie；提交时要求附加本域才能获取的信息，包括**CSRF Token**和**双重Cookie验证**
   
3. **https加密方式**
   
   1. 服务端有非对称加密的公钥A1，私钥A2；
   2. 客户端发起请求，服务端将公钥A1返回给客户端；
   3. 客户端随机生成一个对称加密的密钥K，用**公钥A1加密**后发送给服务端；
   4. 服务端收到密文后用自己的**私钥A2解密**，得到对称密钥K，此时完成了安全的对称密钥交换，解决了对称加密时密钥传输被人窃取的问题
   5. 之后双方通信都使用密钥K进行对称加解密。
   
   如果此时在客户端和服务器之间存在⼀个中间⼈,这个中间⼈只需要把原本双⽅通信互发的公钥,换成⾃⼰的公钥,这样中 间⼈就可以轻松解密通信双⽅所发送的所有数据。 
   
   所以这个时候需要⼀个安全的**第三⽅颁发证书（CA）**，证明身份的身份，防⽌被中间⼈攻击。
   
   但是问题来了，如果中间⼈篡改了证书，那么身份证明是不是就⽆效了？这个证明就⽩买了，这个时候需要⼀个新的技 术，数字签名。 
   
   数字签名就是⽤CA⾃带的HASH算法对证书的内容进⾏HASH得到⼀个摘要，再⽤CA的私钥加密，最终组成数字签 名。
   
   当别⼈把他的证书发过来的时候,我再⽤同样的Hash算法,再次⽣成消息摘要，然后⽤CA的公钥对数字签名解密,得到CA 创建的消息摘要,两者⼀⽐,就知道中间有没有被⼈篡改了。 
   
   这个时候就能最⼤程度保证通信的安全了。
   
4. **Http1.1时如何复用Tcp连接**

   默认使用长连接：keep-alive

   可以减少三次握手的开销

   http2是通过多路复用来解决的

5. **同样是重定向307，303，302的区别？** 

   - 302是http1.0的协议状态码，在http1.1版本的时候为了细化302状态码⼜出来了两个303和307。 

   - 303明确表示客户端应当采⽤get⽅法获取资源，他会把POST请求变为GET请求进⾏重定向。
   -  307会遵照浏览器标准， 不会从post变为get。

6. **HTTP的keep-alive是⼲什么的？** 

   在早期的HTTP/1.0中，每次http请求都要创建⼀个连接，⽽创建连接的过程需要消耗资源和时间，为了减少资源消耗， 缩短响应时间，就需要重⽤连接。在后来的HTTP/1.0中以及HTTP/1.1中，引⼊了重⽤连接的机制，就是在http请求头中 加⼊Connection: keep-alive来告诉对⽅这个请求响应完成后不要关闭，下⼀次咱们还⽤这个请求继续交流。协议规定HTTP/1.0如果想要保持⻓连接，需要在请求头中加上**Connection: keep-alive**。 

   keep-alive的优点： 

   - 较少的CPU和内存的使⽤（由于同时打开的连接的减少了） 

   - 允许请求和应答的HTTP管线化 

   - 降低拥塞控制 （TCP连接减少了） 

   - 减少了后续请求的延迟（⽆需再进⾏握⼿） 

   - 报告错误⽆需关闭TCP连接

7. **TCP 的特性** 

   TCP 提供⼀种⾯向连接的、可靠的字节流服务 

   - 在⼀个 TCP 连接中，仅有**两⽅**进⾏彼此通信。⼴播和多播不能⽤于 TCP 

   - TCP 使⽤**校验和，确认和重传机制**来保证可靠传输 

   - TCP 给数据分节进⾏排序，并使⽤**累积确认**保证数据的顺序不变和⾮重复 

   - TCP 使⽤**滑动窗⼝**机制来实现流量控制，通过动态改变窗⼝的⼤⼩进⾏拥塞控制 

8. **HTTPS握手过程**
   1. 客户端使用https的url访问web服务器,要求与服务器建立ssl连接
   2. web服务器收到客户端请求后, 会将网站的证书(包含公钥)传送一份给客户端
   3. 客户端收到网站证书后会检查证书的颁发机构以及过期时间, 如果没有问题就随机产生一个秘钥
   4. 客户端利用公钥将会话秘钥加密, 并传送给服务端, 服务端利用自己的私钥解密出会话秘钥
   5. 之后服务器与客户端使用秘钥加密传输